{
  "reef": "1.0",
  "type": "shoal",
  "name": "reef-forge",
  "version": "0.3.0",
  "description": "5-agent formation that builds other formations. Architect coordinates research, SOUL writing, scaffolding, and adversarial QA to produce world-class OpenReef formations.",
  "author": "OpenReef",
  "license": "MIT",
  "repository": "https://github.com/openreefai/reef-forge",
  "namespace": "reef-forge",
  "compatibility": {
    "openclaw": ">=0.5.0"
  },
  "variables": {
    "INTERACTION_CHANNEL": {
      "type": "string",
      "description": "Channel token for the primary contact channel (examples: slack, telegram, discord, teams)",
      "required": true,
      "sensitive": false
    },
    "OPENREEF_REPO_URL": {
      "type": "string",
      "description": "URL of the openreef repository for Researcher/QA to clone",
      "default": "https://github.com/openreefai/openreef",
      "required": false,
      "sensitive": false
    },
    "TIDE_REPO_URL": {
      "type": "string",
      "description": "URL of the tide registry repository for Researcher/QA to clone",
      "default": "https://github.com/openreefai/tide",
      "required": false,
      "sensitive": false
    },
    "OPENCLAW_REPO_URL": {
      "type": "string",
      "description": "URL of the openclaw runtime repository for Researcher/QA to clone",
      "default": "https://github.com/openclaw/openclaw",
      "required": false,
      "sensitive": false
    },
    "MAX_QA_ROUNDS": {
      "type": "number",
      "description": "Maximum adversarial QA rounds before escalating unresolved disputes to user",
      "default": 4,
      "required": false,
      "sensitive": false
    }
  },
  "agents": {
    "architect": {
      "source": "agents/architect",
      "description": "Single point of contact. Decomposes formation requests, defines specs and acceptance criteria, routes work to specialists, mediates QA disputes, escalates to user after adversarial rounds.",
      "role": "coordinator",
      "model": "anthropic/claude-opus-4-6",
      "tools": { "allow": ["web_search", "read", "write", "sessions_send"] },
      "sandbox": { "network": true, "filesystem": "restricted" }
    },
    "researcher": {
      "source": "agents/researcher",
      "description": "Deep domain research before building begins. Clones openreef, tide, and openclaw repos (read-only). Browses ClawHub for existing skills. Produces structured briefs.",
      "role": "researcher",
      "model": "anthropic/claude-opus-4-6",
      "tools": { "allow": ["web_search", "read", "exec", "sessions_send"] },
      "sandbox": { "network": true, "filesystem": "restricted" }
    },
    "soul-writer": {
      "source": "agents/soul-writer",
      "description": "Writes SOUL.md files with personality, behavior, tools, and communication sections. Writes IDENTITY.md. Authors knowledge/static reference material.",
      "role": "writer",
      "model": "anthropic/claude-opus-4-6",
      "tools": { "allow": ["web_search", "read", "write", "sessions_send"] },
      "sandbox": { "network": true, "filesystem": "restricted" }
    },
    "builder": {
      "source": "agents/builder",
      "description": "Scaffolds complete formation file trees. Writes reef.json, README, .env.example, .gitignore, reef.lock.json. Wires ClawHub skills into dependencies. Runs reef validate.",
      "role": "builder",
      "model": "anthropic/claude-opus-4-6",
      "tools": { "allow": ["web_search", "read", "write", "exec", "sessions_send"] },
      "sandbox": { "network": true, "filesystem": "restricted" }
    },
    "qa": {
      "source": "agents/qa",
      "description": "Adversarial reviewer using a different vendor model. Reviews formations against quality checklist. Audits ecosystem repos read-only. Cites specific failures. Escalates unresolved disputes after max rounds.",
      "role": "reviewer",
      "model": "openai/gpt-5.3-codex",
      "tools": { "allow": ["web_search", "read", "exec", "sessions_send"] },
      "sandbox": { "network": true, "filesystem": "restricted" }
    }
  },
  "agentToAgent": {
    "architect": ["researcher", "soul-writer", "builder", "qa"],
    "researcher": ["architect"],
    "soul-writer": ["architect", "builder"],
    "builder": ["architect", "qa"],
    "qa": ["architect", "builder", "soul-writer", "researcher"]
  },
  "bindings": [
    { "match": { "channel": "{{INTERACTION_CHANNEL}}" }, "agent": "architect" }
  ],
  "dependencies": {
    "services": [
      {
        "name": "Anthropic API",
        "url": "https://console.anthropic.com",
        "required": true,
        "description": "LLM provider for Architect, Researcher, Soul Writer, and Builder (Opus)"
      },
      {
        "name": "OpenAI API",
        "url": "https://platform.openai.com",
        "required": true,
        "description": "LLM provider for QA agent (gpt-5.3-codex)"
      },
      {
        "name": "GitHub API",
        "url": "https://github.com/settings/tokens",
        "required": false,
        "description": "Optional â€” needed for private repo cloning or to avoid rate limits on Researcher and QA ecosystem audits"
      },
      {
        "name": "ClawHub",
        "url": "https://clawhub.dev",
        "required": false,
        "description": "Skill discovery for Researcher, skill wiring for Builder"
      }
    ]
  },
  "validation": {
    "agent_exists": true,
    "file_exists": true,
    "binding_active": true,
    "cron_exists": false,
    "agent_responds": {
      "enabled": false,
      "timeout": 30
    }
  }
}
